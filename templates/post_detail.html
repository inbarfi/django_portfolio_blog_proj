{% extends "base.html" %}
{% block content %}

    <div class="post-block">
        <h2 class="subtitle">{{post.title}}</h2>

        <div class="small">Posted at {{ post.date_added }}</div>

        <div class="strong">{{ post.intro }}</div>

        {% if post.cover_photo %}
            <img src="{{ post.cover_photo.image.url }}">
        {% endif %}


        <!--display cover photo if exists-->

        <hr>

        <p>{{ post.body }}</p>

        <hr>

        <!-- display all photos if not cover photo and if exists-->
        {% for photo in post.photos.all %}
            {% if not photo.is_cover %}
                <img src="{{ photo.image.url }}">
            {% endif %}
        {% endfor %}



        <hr>

        <h2 class="subtitle">Comments</h2>
        {% for comment in post.comments.all %}
            <article class="media">
                <div class="media-content">
                    <div class="content">
                        <p>
                            <strong>{{ comment.name }}</strong> <small>{{ comment.date_added }}</small>
                            <br>
                            {{ comment.body }}
                        </p>
                    </div>
                </div>
            </article>
        {% empty %}
            <div class="notification">
                <p>No comments yet.</p>
            </div>
        {% endfor %}

        <h2 class="subtitle">Add Comment</h2>
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <div class="field">
                <div class="control">
                    <button class="button is-success">Submit</button>
                </div>
            </div>

        </form>
    </div>

{% endblock content %}